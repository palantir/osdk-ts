{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "OSDK Component Registry",
  "description": "Machine-readable registry of documented OSDK components, hooks, and utilities for LLM consumption",
  "type": "object",
  "properties": {
    "$schema": {
      "type": "string",
      "description": "JSON Schema reference"
    },
    "version": {
      "type": "string",
      "description": "Registry version (semver)"
    },
    "components": {
      "type": "array",
      "description": "List of documented components",
      "items": {
        "$ref": "#/definitions/component"
      }
    }
  },
  "required": ["version", "components"],
  "definitions": {
    "component": {
      "type": "object",
      "properties": {
        "name": {
          "type": "string",
          "description": "Component/hook/utility name"
        },
        "type": {
          "type": "string",
          "enum": ["hook", "component", "provider", "utility", "function"],
          "description": "Type of the item"
        },
        "package": {
          "type": "string",
          "description": "NPM package name (e.g., '@osdk/react', '@osdk/client')"
        },
        "importPath": {
          "type": "string",
          "description": "Full import path (e.g., '@osdk/react/experimental')"
        },
        "stability": {
          "type": "string",
          "enum": ["stable", "experimental", "beta", "deprecated"],
          "description": "API stability level"
        },
        "description": {
          "type": "string",
          "description": "Brief description of what it does"
        },
        "docPath": {
          "type": "string",
          "description": "Relative path to documentation file"
        },
        "sourcePath": {
          "type": "string",
          "description": "Relative path to source code file"
        },
        "category": {
          "type": "string",
          "description": "Category for grouping (e.g., 'queries', 'actions', 'platform-apis')"
        },
        "tags": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Searchable tags"
        },
        "usageExample": {
          "type": "string",
          "description": "Brief code snippet showing basic usage"
        },
        "parameters": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/parameter"
          },
          "description": "Function/hook parameters"
        },
        "returnValue": {
          "type": "object",
          "properties": {
            "type": {
              "type": "string",
              "description": "Return type"
            },
            "description": {
              "type": "string",
              "description": "What it returns"
            }
          }
        },
        "relatedComponents": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Names of related components"
        },
        "requires": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Required setup (e.g., 'OsdkProvider2')"
        }
      },
      "required": ["name", "type", "package", "importPath", "stability", "description", "docPath"]
    },
    "parameter": {
      "type": "object",
      "properties": {
        "name": {
          "type": "string"
        },
        "type": {
          "type": "string"
        },
        "required": {
          "type": "boolean"
        },
        "description": {
          "type": "string"
        },
        "default": {
          "type": "string"
        }
      },
      "required": ["name", "type", "required", "description"]
    }
  }
}
