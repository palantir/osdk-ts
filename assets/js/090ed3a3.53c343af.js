"use strict";(self.webpackChunk_osdk_docs=self.webpackChunk_osdk_docs||[]).push([[428],{1546:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>a,contentTitle:()=>o,default:()=>h,frontMatter:()=>r,metadata:()=>d,toc:()=>c});var i=t(6106),s=t(8784);const r={sidebar_position:2},o="Querying Data",d={id:"react/querying-data",title:"Querying Data",description:"This guide covers all the ways to fetch data from the server using OSDK React hooks.",source:"@site/react/querying-data.md",sourceDirName:"react",slug:"/react/querying-data",permalink:"/osdk-ts/react/querying-data",draft:!1,unlisted:!1,editUrl:"https://github.com/palantir/osdk-ts/tree/main/docs/react/querying-data.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"docs",previous:{title:"Getting Started",permalink:"/osdk-ts/react/getting-started"},next:{title:"Actions",permalink:"/osdk-ts/react/actions"}},a={},c=[{value:"useOsdkObjects",id:"useosdkobjects",level:2},{value:"Basic Usage",id:"basic-usage",level:3},{value:"Return Values",id:"return-values",level:3},{value:"Fetching by RID",id:"fetching-by-rid",level:3},{value:"Filtering with <code>where</code>",id:"filtering-with-where",level:3},{value:"Text Search Filters",id:"text-search-filters",level:3},{value:"<code>$startsWith</code>",id:"startswith",level:4},{value:"<code>$containsAnyTerm</code>",id:"containsanyterm",level:4},{value:"<code>$containsAllTerms</code>",id:"containsallterms",level:4},{value:"<code>$containsAllTermsInOrder</code>",id:"containsalltermsinorder",level:4},{value:"Search Filter Comparison",id:"search-filter-comparison",level:4},{value:"Search Example: Building a Search Box",id:"search-example-building-a-search-box",level:4},{value:"Sorting with <code>orderBy</code>",id:"sorting-with-orderby",level:3},{value:"Pagination",id:"pagination",level:3},{value:"Auto-Fetching Pages",id:"auto-fetching-pages",level:3},{value:"Conditional Queries with <code>enabled</code>",id:"conditional-queries-with-enabled",level:3},{value:"Real-time Updates with <code>streamUpdates</code>",id:"real-time-updates-with-streamupdates",level:3},{value:"Set Intersections with <code>intersectWith</code>",id:"set-intersections-with-intersectwith",level:3},{value:"Pivot to Related Objects with <code>pivotTo</code>",id:"pivot-to-related-objects-with-pivotto",level:3},{value:"All Options",id:"all-options",level:3},{value:"useOsdkObject",id:"useosdkobject",level:2},{value:"Tracking an Existing Instance",id:"tracking-an-existing-instance",level:3},{value:"Loading by Primary Key",id:"loading-by-primary-key",level:3},{value:"Return Values",id:"return-values-1",level:3},{value:"useLinks",id:"uselinks",level:2},{value:"Basic Usage",id:"basic-usage-1",level:3},{value:"Multiple Source Objects",id:"multiple-source-objects",level:3},{value:"Lazy Loading with <code>enabled</code>",id:"lazy-loading-with-enabled",level:3},{value:"Controlling Re-fetch Behavior",id:"controlling-re-fetch-behavior",level:3},{value:"Options",id:"options",level:3},{value:"Return Values",id:"return-values-2",level:3},{value:"useOsdkClient",id:"useosdkclient",level:2},{value:"Error Handling",id:"error-handling",level:2},{value:"Combining Multiple Hooks",id:"combining-multiple-hooks",level:2}];function l(e){const n={admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h1,{id:"querying-data",children:"Querying Data"}),"\n",(0,i.jsx)(n.p,{children:"This guide covers all the ways to fetch data from the server using OSDK React hooks."}),"\n",(0,i.jsx)(n.h2,{id:"useosdkobjects",children:"useOsdkObjects"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsxs)(n.em,{children:["Experimental - import from ",(0,i.jsx)(n.code,{children:"@osdk/react/experimental"})]})}),"\n",(0,i.jsx)(n.p,{children:"Retrieve and observe collections of objects with automatic cache management."}),"\n",(0,i.jsx)(n.h3,{id:"basic-usage",children:"Basic Usage"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-tsx",children:'import { Todo } from "@my/osdk";\nimport {\n  type UseOsdkListResult,\n  useOsdkObjects,\n} from "@osdk/react/experimental";\n\nfunction TodoList() {\n  const {\n    data,\n    isLoading,\n    isOptimistic,\n    error,\n    fetchMore,\n  }: UseOsdkListResult<typeof Todo> = useOsdkObjects(Todo);\n\n  if (!data && isLoading) {\n    return "Loading...";\n  }\n\n  return (\n    <div>\n      {isLoading && <div>Refreshing data</div>}\n      {data.map(todo => <TodoView key={todo.$primaryKey} todo={todo} />)}\n    </div>\n  );\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"return-values",children:"Return Values"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"data"})," - Array of objects matching the query (undefined while initially loading)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"isLoading"})," - True while fetching data from server (can be true while ",(0,i.jsx)(n.code,{children:"data"})," exists during revalidation)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"isOptimistic"})," - True if the list order is affected by optimistic updates (see note below)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"fetchMore"})," - Function to load next page (undefined when no more pages available)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"error"})," - Error object if fetch failed"]}),"\n"]}),"\n",(0,i.jsx)(n.admonition,{title:"About isOptimistic",type:"note",children:(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"isOptimistic"})," refers to whether the ",(0,i.jsx)(n.strong,{children:"ordered list of objects"})," (considering only primary keys) is optimistic. To check if individual object contents are optimistic, use ",(0,i.jsx)(n.code,{children:"useOsdkObject"})," on each object."]})}),"\n",(0,i.jsx)(n.h3,{id:"fetching-by-rid",children:"Fetching by RID"}),"\n",(0,i.jsx)(n.p,{children:"Fetch specific objects by their RIDs:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-tsx",children:'import { Employee } from "@my/osdk";\nimport { useOsdkObjects } from "@osdk/react/experimental";\n\nfunction SelectedEmployees({ selectedRids }: { selectedRids: string[] }) {\n  const { data, isLoading } = useOsdkObjects(Employee, {\n    rids: selectedRids,\n  });\n\n  if (isLoading && !data) {\n    return <div>Loading selected employees...</div>;\n  }\n\n  return (\n    <div>\n      {data?.map(employee => (\n        <div key={employee.$primaryKey}>{employee.fullName}</div>\n      ))}\n    </div>\n  );\n}\n'})}),"\n",(0,i.jsxs)(n.h3,{id:"filtering-with-where",children:["Filtering with ",(0,i.jsx)(n.code,{children:"where"})]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",children:'const { data, isLoading } = useOsdkObjects(Todo, {\n  where: { text: { $startsWith: "cool " } },\n});\n'})}),"\n",(0,i.jsx)(n.h3,{id:"text-search-filters",children:"Text Search Filters"}),"\n",(0,i.jsx)(n.p,{children:"OSDK provides several text search operators for string properties. Understanding the differences helps you choose the right one for your use case."}),"\n",(0,i.jsx)(n.h4,{id:"startswith",children:(0,i.jsx)(n.code,{children:"$startsWith"})}),"\n",(0,i.jsx)(n.p,{children:"Matches strings that begin with the specified prefix."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",children:'const { data } = useOsdkObjects(Employee, {\n  where: { fullName: { $startsWith: "John" } },\n});\n// Matches: "John Smith", "Johnny Appleseed"\n// Does NOT match: "Mary Johnson"\n'})}),"\n",(0,i.jsx)(n.h4,{id:"containsanyterm",children:(0,i.jsx)(n.code,{children:"$containsAnyTerm"})}),"\n",(0,i.jsxs)(n.p,{children:["Matches if the property contains ",(0,i.jsx)(n.strong,{children:"any"})," of the search terms. Terms are space-separated. Useful for broad searches where matching any word is sufficient."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",children:'const { data } = useOsdkObjects(Article, {\n  where: { content: { $containsAnyTerm: "react typescript javascript" } },\n});\n// Matches articles containing "react" OR "typescript" OR "javascript"\n'})}),"\n",(0,i.jsx)(n.p,{children:"With fuzzy matching enabled, minor typos are tolerated:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",children:'const { data } = useOsdkObjects(Article, {\n  where: { content: { $containsAnyTerm: { term: "react", fuzzySearch: true } } },\n});\n// Fuzzy matching handles common typos automatically\n'})}),"\n",(0,i.jsx)(n.h4,{id:"containsallterms",children:(0,i.jsx)(n.code,{children:"$containsAllTerms"})}),"\n",(0,i.jsxs)(n.p,{children:["Matches if the property contains ",(0,i.jsx)(n.strong,{children:"all"})," of the search terms, in any order. Use this for more precise searches where all keywords must be present."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",children:'const { data } = useOsdkObjects(Article, {\n  where: { content: { $containsAllTerms: "react hooks tutorial" } },\n});\n// Matches: "This tutorial covers React hooks in depth"\n// Matches: "Learn hooks - a React tutorial"\n// Does NOT match: "React components guide" (missing "hooks" and "tutorial")\n'})}),"\n",(0,i.jsx)(n.p,{children:"With fuzzy matching:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",children:'const { data } = useOsdkObjects(Article, {\n  where: { content: { $containsAllTerms: { term: "react hooks", fuzzySearch: true } } },\n});\n'})}),"\n",(0,i.jsx)(n.h4,{id:"containsalltermsinorder",children:(0,i.jsx)(n.code,{children:"$containsAllTermsInOrder"})}),"\n",(0,i.jsxs)(n.p,{children:["Matches if the property contains all terms ",(0,i.jsx)(n.strong,{children:"in the exact order specified"}),". Use this for phrase matching."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",children:'const { data } = useOsdkObjects(Document, {\n  where: { title: { $containsAllTermsInOrder: "quarterly sales report" } },\n});\n// Matches: "Q4 Quarterly Sales Report 2024"\n// Does NOT match: "Sales Report - Quarterly" (wrong order)\n'})}),"\n",(0,i.jsx)(n.h4,{id:"search-filter-comparison",children:"Search Filter Comparison"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Filter"}),(0,i.jsx)(n.th,{children:"Match Requirement"}),(0,i.jsx)(n.th,{children:"Use Case"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"$startsWith"})}),(0,i.jsx)(n.td,{children:"Begins with prefix"}),(0,i.jsx)(n.td,{children:"Autocomplete, prefix search"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"$containsAnyTerm"})}),(0,i.jsx)(n.td,{children:"Any term present"}),(0,i.jsx)(n.td,{children:"Broad keyword search"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"$containsAllTerms"})}),(0,i.jsx)(n.td,{children:"All terms present (any order)"}),(0,i.jsx)(n.td,{children:"Precise multi-keyword search"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"$containsAllTermsInOrder"})}),(0,i.jsx)(n.td,{children:"All terms in exact order"}),(0,i.jsx)(n.td,{children:"Phrase/exact match search"})]})]})]}),"\n",(0,i.jsx)(n.h4,{id:"search-example-building-a-search-box",children:"Search Example: Building a Search Box"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-tsx",children:'import { Article } from "@my/osdk";\nimport { useOsdkObjects } from "@osdk/react/experimental";\nimport { useState } from "react";\n\nfunction ArticleSearch() {\n  const [searchQuery, setSearchQuery] = useState("");\n\n  const { data, isLoading } = useOsdkObjects(Article, {\n    where: searchQuery\n      ? { title: { $containsAnyTerm: { term: searchQuery, fuzzySearch: true } } }\n      : undefined,\n    enabled: searchQuery.length >= 2,\n  });\n\n  return (\n    <div>\n      <input\n        type="text"\n        placeholder="Search articles..."\n        value={searchQuery}\n        onChange={e => setSearchQuery(e.target.value)}\n      />\n\n      {isLoading && <div>Searching...</div>}\n\n      {data?.map(article => (\n        <div key={article.$primaryKey}>{article.title}</div>\n      ))}\n    </div>\n  );\n}\n'})}),"\n",(0,i.jsxs)(n.h3,{id:"sorting-with-orderby",children:["Sorting with ",(0,i.jsx)(n.code,{children:"orderBy"})]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",children:'const { data } = useOsdkObjects(Todo, {\n  orderBy: { createdAt: "desc" },\n});\n'})}),"\n",(0,i.jsx)(n.h3,{id:"pagination",children:"Pagination"}),"\n",(0,i.jsx)(n.p,{children:"Control page size and load more results:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-tsx",children:'function TodoList() {\n  const { data, isLoading, fetchMore } = useOsdkObjects(Todo, {\n    pageSize: 10,\n  });\n\n  return (\n    <div>\n      {data?.map(todo => <TodoView key={todo.$primaryKey} todo={todo} />)}\n\n      {fetchMore && (\n        <button onClick={() => fetchMore()} disabled={isLoading}>\n          {isLoading ? "Loading..." : "Load More"}\n        </button>\n      )}\n    </div>\n  );\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"auto-fetching-pages",children:"Auto-Fetching Pages"}),"\n",(0,i.jsxs)(n.p,{children:["By default, only the first page is fetched. Use ",(0,i.jsx)(n.code,{children:"autoFetchMore"})," to load more automatically:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-tsx",children:"// Fetch all pages automatically\nconst { data, isLoading } = useOsdkObjects(Todo, {\n  autoFetchMore: true,\n});\n\n// Fetch at least 100 items\nconst { data, isLoading, fetchMore } = useOsdkObjects(Todo, {\n  autoFetchMore: 100,\n  pageSize: 25, // Will load 4 pages\n});\n"})}),"\n",(0,i.jsx)(n.admonition,{title:"Performance Warning",type:"warning",children:(0,i.jsxs)(n.p,{children:["Using ",(0,i.jsx)(n.code,{children:"autoFetchMore: true"})," on large datasets may cause long load times and high memory usage. Prefer ",(0,i.jsx)(n.code,{children:"autoFetchMore: N"})," with a specific number."]})}),"\n",(0,i.jsxs)(n.h3,{id:"conditional-queries-with-enabled",children:["Conditional Queries with ",(0,i.jsx)(n.code,{children:"enabled"})]}),"\n",(0,i.jsx)(n.p,{children:"Control when a query executes:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-tsx",children:'import { Todo } from "@my/osdk";\nimport { useOsdkObjects } from "@osdk/react/experimental";\nimport { useState } from "react";\n\nfunction ConditionalTodoFetch() {\n  const [shouldFetch, setShouldFetch] = useState(false);\n\n  const { data, isLoading } = useOsdkObjects(Todo, {\n    where: { isComplete: false },\n    enabled: shouldFetch, // Only fetch when true\n  });\n\n  return (\n    <div>\n      <button onClick={() => setShouldFetch(!shouldFetch)}>\n        {shouldFetch ? "Hide" : "Show"} Incomplete Todos\n      </button>\n\n      {shouldFetch && isLoading && !data && <div>Loading...</div>}\n      {data?.map(todo => <div key={todo.$primaryKey}>{todo.title}</div>)}\n    </div>\n  );\n}\n'})}),"\n",(0,i.jsxs)(n.h3,{id:"real-time-updates-with-streamupdates",children:["Real-time Updates with ",(0,i.jsx)(n.code,{children:"streamUpdates"})]}),"\n",(0,i.jsx)(n.p,{children:"Enable WebSocket-based real-time updates:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-tsx",children:'import { Todo } from "@my/osdk";\nimport { useOsdkObjects } from "@osdk/react/experimental";\n\nfunction LiveTodoList() {\n  const { data, isLoading } = useOsdkObjects(Todo, {\n    where: { isComplete: false },\n    orderBy: { createdAt: "desc" },\n    streamUpdates: true,\n  });\n\n  // Data automatically updates when:\n  // - New todos matching the where clause are created\n  // - Existing todos are modified and still match\n  // - Todos are deleted or no longer match\n\n  if (isLoading && !data) {\n    return <div>Loading todos...</div>;\n  }\n\n  return (\n    <div>\n      <h2>Live Todo List ({data?.length})</h2>\n      {data?.map(todo => (\n        <div key={todo.$primaryKey}>\n          <span>{todo.title}</span>\n          {isLoading && <span style={{ fontSize: "0.8em" }}>(Updating...)</span>}\n        </div>\n      ))}\n    </div>\n  );\n}\n'})}),"\n",(0,i.jsxs)(n.h3,{id:"set-intersections-with-intersectwith",children:["Set Intersections with ",(0,i.jsx)(n.code,{children:"intersectWith"})]}),"\n",(0,i.jsx)(n.p,{children:"Find objects matching multiple where clauses:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-tsx",children:'import { Employee } from "@my/osdk";\nimport { useOsdkObjects } from "@osdk/react/experimental";\n\nfunction EmployeesIntersection() {\n  const { data, isLoading } = useOsdkObjects(Employee, {\n    where: { department: "Engineering" },\n    intersectWith: [\n      { where: { salary: { $gte: 100000 } } },\n      { where: { yearsExperience: { $gte: 5 } } },\n    ],\n    orderBy: { fullName: "asc" },\n  });\n\n  if (isLoading && !data) {\n    return <div>Loading...</div>;\n  }\n\n  return (\n    <div>\n      <h3>Senior Engineers with High Salary ({data?.length})</h3>\n      {data?.map(employee => (\n        <div key={employee.$primaryKey}>{employee.fullName}</div>\n      ))}\n    </div>\n  );\n}\n'})}),"\n",(0,i.jsxs)(n.h3,{id:"pivot-to-related-objects-with-pivotto",children:["Pivot to Related Objects with ",(0,i.jsx)(n.code,{children:"pivotTo"})]}),"\n",(0,i.jsx)(n.p,{children:"Traverse relationships and return linked objects:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-tsx",children:'import { Employee } from "@my/osdk";\nimport { useOsdkObjects } from "@osdk/react/experimental";\n\nfunction ManagerReports() {\n  const { data, isLoading } = useOsdkObjects(Employee, {\n    where: { fullName: "John Smith" },\n    pivotTo: "reports", // Changes return type from Employee[] to Report[]\n  });\n\n  if (isLoading && !data) {\n    return <div>Loading...</div>;\n  }\n\n  return (\n    <div>\n      <h3>John Smith\'s Direct Reports ({data?.length})</h3>\n      {data?.map(report => (\n        <div key={report.$primaryKey}>{report.fullName}</div>\n      ))}\n    </div>\n  );\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"all-options",children:"All Options"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",children:'const { data, isLoading, isOptimistic, fetchMore, error } = useOsdkObjects(\n  Todo,\n  {\n    rids: ["ri.phonograph2-objects.main.object.abc123", "ri.phonograph2-objects.main.object.def456"],\n    where: { isComplete: false },\n    pageSize: 20,\n    orderBy: { createdAt: "desc" },\n    dedupeIntervalMs: 5000,\n    streamUpdates: true,\n    autoFetchMore: 100,\n    enabled: true,\n    intersectWith: [{ where: { priority: "high" } }],\n    pivotTo: "assignee",\n    withProperties: { /* see advanced-queries */ },\n  },\n);\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"useosdkobject",children:"useOsdkObject"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsxs)(n.em,{children:["Experimental - import from ",(0,i.jsx)(n.code,{children:"@osdk/react/experimental"})]})}),"\n",(0,i.jsx)(n.p,{children:"Retrieve and observe a single object."}),"\n",(0,i.jsx)(n.h3,{id:"tracking-an-existing-instance",children:"Tracking an Existing Instance"}),"\n",(0,i.jsx)(n.p,{children:"Pass an object instance to track its loading and optimistic state:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-tsx",children:'import { Todo } from "@my/osdk";\nimport { useOsdkObject } from "@osdk/react/experimental";\n\nfunction TodoView({ todo }: { todo: Todo.OsdkInstance }) {\n  const { object, isLoading, isOptimistic, error } = useOsdkObject(todo);\n\n  return (\n    <div>\n      {object?.title || todo.title}\n      {isLoading && " (Loading)"}\n      {isOptimistic && " (Optimistic)"}\n      {error && <div>Error: {error.message}</div>}\n    </div>\n  );\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"loading-by-primary-key",children:"Loading by Primary Key"}),"\n",(0,i.jsx)(n.p,{children:"Fetch an object by its type and primary key:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-tsx",children:'import { Todo } from "@my/osdk";\nimport { useOsdkObject } from "@osdk/react/experimental";\n\nfunction TodoLoader({ todoId }: { todoId: string }) {\n  const { object, isLoading, error } = useOsdkObject(Todo, todoId);\n\n  if (isLoading && !object) {\n    return <div>Loading todo...</div>;\n  }\n\n  if (error) {\n    return <div>Error loading todo: {error.message}</div>;\n  }\n\n  if (!object) {\n    return <div>Todo not found</div>;\n  }\n\n  return <TodoView todo={object} />;\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"return-values-1",children:"Return Values"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"object"})," - The object instance (may be undefined while loading)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"isLoading"})," - True while fetching from server"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"isOptimistic"})," - True if object has optimistic updates applied"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"error"})," - Error object if fetch failed"]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"uselinks",children:"useLinks"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsxs)(n.em,{children:["Experimental - import from ",(0,i.jsx)(n.code,{children:"@osdk/react/experimental"})]})}),"\n",(0,i.jsx)(n.p,{children:"Observe and navigate relationships between objects."}),"\n",(0,i.jsx)(n.h3,{id:"basic-usage-1",children:"Basic Usage"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-tsx",children:'import { Employee } from "@my/osdk";\nimport { useLinks } from "@osdk/react/experimental";\n\nfunction EmployeeReports({ employee }: { employee: Employee.OsdkInstance }) {\n  const { links, isLoading, fetchMore, hasMore } = useLinks(\n    employee,\n    "reports",\n    {\n      pageSize: 10,\n      orderBy: { name: "asc" },\n      where: { isActive: true },\n    },\n  );\n\n  if (isLoading && !links) {\n    return <div>Loading reports...</div>;\n  }\n\n  return (\n    <div>\n      <h3>Reports ({links?.length})</h3>\n      {links?.map(report => <div key={report.$primaryKey}>{report.name}</div>)}\n\n      {hasMore && (\n        <button onClick={() => fetchMore?.()} disabled={isLoading}>\n          Load More\n        </button>\n      )}\n    </div>\n  );\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"multiple-source-objects",children:"Multiple Source Objects"}),"\n",(0,i.jsx)(n.p,{children:"Load links from multiple objects at once:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-tsx",children:'function TeamMembers({ employees }: { employees: Employee.OsdkInstance[] }) {\n  const { links, isLoading } = useLinks(employees, "reports");\n\n  return (\n    <div>\n      <h3>All Team Reports</h3>\n      {links?.map(report => <div key={report.$primaryKey}>{report.name}</div>)}\n    </div>\n  );\n}\n'})}),"\n",(0,i.jsxs)(n.h3,{id:"lazy-loading-with-enabled",children:["Lazy Loading with ",(0,i.jsx)(n.code,{children:"enabled"})]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-tsx",children:'import { Employee } from "@my/osdk";\nimport { useLinks } from "@osdk/react/experimental";\nimport { useState } from "react";\n\nfunction OptionalReportsList({ employee }: { employee: Employee.OsdkInstance }) {\n  const [showReports, setShowReports] = useState(false);\n\n  const { links, isLoading } = useLinks(employee, "reports", {\n    enabled: showReports,\n  });\n\n  return (\n    <div>\n      <button onClick={() => setShowReports(!showReports)}>\n        {showReports ? "Hide" : "Show"} Reports\n      </button>\n\n      {showReports && isLoading && !links && <div>Loading...</div>}\n      {links?.map(report => <div key={report.$primaryKey}>{report.name}</div>)}\n    </div>\n  );\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"controlling-re-fetch-behavior",children:"Controlling Re-fetch Behavior"}),"\n",(0,i.jsxs)(n.p,{children:["By default, ",(0,i.jsx)(n.code,{children:"useLinks"})," deduplicates network requests within a 2-second window. You can customize this with ",(0,i.jsx)(n.code,{children:"dedupeIntervalMs"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-tsx",children:'const { links } = useLinks(employee, "reports", {\n  dedupeIntervalMs: 10000, // don\'t re-fetch within 10 seconds\n});\n'})}),"\n",(0,i.jsxs)(n.p,{children:["To prevent re-fetching entirely on remount and only refresh when the server data is invalidated (e.g. after an action), use ",(0,i.jsx)(n.code,{children:"Infinity"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-tsx",children:'const { links } = useLinks(employee, "reports", {\n  dedupeIntervalMs: Infinity,\n});\n'})}),"\n",(0,i.jsx)(n.h3,{id:"options",children:"Options"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"where"})," - Filter linked objects"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"pageSize"})," - Number of links per page"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"orderBy"})," - Sort order for linked objects"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"mode"})," - Fetch mode: ",(0,i.jsx)(n.code,{children:'"force"'})," (always fetch), ",(0,i.jsx)(n.code,{children:'"offline"'})," (cache only), or undefined (default)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"dedupeIntervalMs"})," - Minimum time between re-fetches (default: 2000ms)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"enabled"})," - Enable/disable the query (default: true)"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"return-values-2",children:"Return Values"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"links"})," - Array of linked objects"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"isLoading"})," - True while fetching"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"isOptimistic"})," - True if links affected by optimistic updates"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"fetchMore"})," - Function to load next page"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"hasMore"})," - True if more pages available"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"error"})," - Error object if fetch failed"]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"useosdkclient",children:"useOsdkClient"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsxs)(n.em,{children:["Stable - available from both ",(0,i.jsx)(n.code,{children:"@osdk/react"})," and ",(0,i.jsx)(n.code,{children:"@osdk/react/experimental"})]})}),"\n",(0,i.jsx)(n.p,{children:"Access the OSDK client directly for custom queries."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-tsx",children:'import { Todo } from "@my/osdk";\nimport { useOsdkClient } from "@osdk/react";\n\nfunction MyComponent() {\n  const client = useOsdkClient();\n\n  const loadTodos = async () => {\n    const todos = await client(Todo).fetchPage();\n    // ...\n  };\n\n  return <button onClick={loadTodos}>Load Todos</button>;\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:"Use this when you need to perform queries outside the reactive hook system, such as in event handlers or effects where you manage state manually."}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"error-handling",children:"Error Handling"}),"\n",(0,i.jsxs)(n.p,{children:["All hooks return an ",(0,i.jsx)(n.code,{children:"error"})," field. A basic pattern:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-tsx",children:'import { Todo } from "@my/osdk";\nimport { useOsdkObjects } from "@osdk/react/experimental";\n\nfunction TodoList() {\n  const { data, isLoading, error } = useOsdkObjects(Todo);\n\n  if (error) {\n    return (\n      <div>\n        <h2>Error loading todos</h2>\n        <p>{JSON.stringify(error)}</p>\n        <button onClick={() => window.location.reload()}>Retry</button>\n      </div>\n    );\n  }\n\n  if (isLoading && !data) {\n    return <div>Loading todos...</div>;\n  }\n\n  return (\n    <div>\n      {data?.map(todo => <TodoView key={todo.$primaryKey} todo={todo} />)}\n    </div>\n  );\n}\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"combining-multiple-hooks",children:"Combining Multiple Hooks"}),"\n",(0,i.jsx)(n.p,{children:"A common pattern is using multiple hooks together:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-tsx",children:'import { Todo } from "@my/osdk";\nimport { useLinks, useOsdkObject } from "@osdk/react/experimental";\n\nfunction TodoWithDetails({ todoId }: { todoId: string }) {\n  const { object: todo, isLoading: todoLoading } = useOsdkObject(Todo, todoId);\n\n  const { links: comments, isLoading: commentsLoading } = useLinks(\n    todo,\n    "comments",\n    { orderBy: { createdAt: "desc" } },\n  );\n\n  if (todoLoading) return <div>Loading...</div>;\n  if (!todo) return <div>Todo not found</div>;\n\n  return (\n    <div>\n      <h2>{todo.title}</h2>\n      <p>{todo.description}</p>\n\n      <h3>Comments ({comments?.length || 0})</h3>\n      {commentsLoading && <div>Loading comments...</div>}\n      {comments?.map(comment => (\n        <div key={comment.$primaryKey}>{comment.text}</div>\n      ))}\n    </div>\n  );\n}\n'})})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}},8784:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>d});var i=t(7378);const s={},r=i.createContext(s);function o(e){const n=i.useContext(r);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);