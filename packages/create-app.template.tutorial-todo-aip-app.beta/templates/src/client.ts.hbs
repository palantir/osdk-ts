import { createClient, type Client } from "@osdk/client";
import { getOsdkConfig } from "@osdk/client/unstable-do-not-use";
import { createPublicOauthClient, type PublicOauthClient } from "@osdk/oauth";
import { $ontologyRid } from "{{osdkPackage}}";

const { clientId, redirectUrl, foundryUrl, ontologyRid } =
  getOsdkConfig($ontologyRid);
{{#if scopes}}

const scopes = [
  {{#each scopes}}
  "{{this}}",
  {{/each}}
];
{{/if}}

export const auth: PublicOauthClient = createPublicOauthClient(
  clientId,
  foundryUrl,
  redirectUrl,
  {{#if scopes}}
  { scopes },
  {{/if}}
);

/**
 * Initialize the client to interact with the Ontology SDK
 */
const client: Client = createClient(
  foundryUrl,
  ontologyRid,
  auth,
);

export default client;
