{{^if applicationUrl}}
import cloud from "/cloud.svg";
{{/if}}
{{^if osdkPackage}}
import cube from "/cube.svg";
{{/if}}
import tag from "/tag.svg";

import React from "react";
import css from "./NextSteps.module.css";

const STEPS: INextStep[] = [
  {{^if osdkPackage}}
  {
    icon: cube,
    title: "Configure your Ontology and Platform SDKs",
    subtitle: (
      <span>
        Use the Ontology SDK to interact with your Ontology and the Platform SDK
        to access Foundry APIs. Configure your SDKs from the{" "}
        <strong>Ontology SDK</strong> and <strong>Platform SDK</strong> tabs in
        Developer Console.
      </span>
    ),
  },
  {{/if}}
  {{^if applicationUrl}}
  {
    icon: cloud,
    title: "Request a subdomain to host your application with Foundry",
    subtitle: (
      <span>
        Register a subdomain for your website on the{" "}
        <strong>Website hosting</strong> tab in Developer Console. Then, add
        this subdomain to your redirect URLs on the{" "}
        <strong>OAuth & scopes</strong> tab and update your{" "}
        <code className={css.code}>.env.production</code> file.
      </span>
    ),
  },
  {{/if}}
  {
    icon: tag,
    title: "Deploy your application",
    subtitle: (
      <span>
        To deploy a new version of your application, tag a new version of your
        repository or use the command line to run{" "}
        <code className={css.code}>npx @osdk/cli@latest site deploy</code>.{" "}
        <a
          className={css.learnMore}
          href="https://www.npmjs.com/package/@osdk/cli"
          target="_blank"
          rel="noreferrer"
        >
          Learn more.
        </a>
      </span>
    ),
  },
];

function NextSteps(): React.ReactElement {
  return (
    <div className={css.nextSteps}>
      <h3 className={css.nextStepsHeader}>Next steps</h3>
      {STEPS.map((step) => (
        <NextStep
          key={step.title}
          icon={step.icon}
          title={step.title}
          subtitle={step.subtitle}
        />
      ))}
    </div>
  );
}

interface INextStep {
  icon: string;
  title: string;
  subtitle: React.ReactElement;
}

function NextStep({
  icon,
  title,
  subtitle,
}: INextStep): React.ReactElement {
  return (
    <div className={css.nextStep}>
      <img src={icon} className={css.icon} alt="Next step icon" />
      <div className={css.nextStepContent}>
        <h4 className={css.title}>{title}</h4>
        <div className={css.subtitle}>{subtitle}</div>
      </div>
    </div>
  );
}

export default NextSteps;
